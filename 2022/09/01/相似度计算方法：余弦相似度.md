> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [juejin.cn](https://juejin.cn/post/6972107942392774693)

最近接触到了推荐系统 ，在这个专题中，和大家分享一下自己的收获和心得。

### 基于用户的协同过滤算法

基于用户的协同过滤算法是推荐系统中最古老的算法，这个算法是 1992 年提出的，是用在了邮件过滤系统中，后面被用到了新闻过滤系统中。简单的来说，推荐系统中，基于用户的协同过滤就是，先找到与目标用户兴趣相似的用户，然后把这些用户喜欢的推荐给目标用户，先找到与目标用户兴趣相似的用户就是计算用户之间的相似度，今天主要就是讲讲用余弦相似度。

### 余弦相似度原理

用向量空间中的两个向量夹角的余弦值作为衡量两个个体间差异大小的度量，值越接近 1，就说明夹角角度越接近 0°，也就是两个向量越相似，就叫做余弦相似

### 余弦相似度公式

从书里面拿出来的公式，犹豫不会在线打数学公式，用手写的照片代替 ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7164f8cdf714a7bb81cec6193efa48e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

直接背书可能大家会迷糊，给大家来个通俗版的

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9821a74cfddc49c589d6eec85bb2cbcc~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

这个通俗版的大家应该可以看明白，下面就来说说推导公式的过程

### 推导公式的过程

如图 a、b 向量，夹角为θ

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf89bd46f328424186f8f97528fbef30~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

如图做辅助线 c

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb0145caf0034df8a85cc2854c243369~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

现在的问题，就是求θ的余弦值，根据余弦定理，相比大家还记得吧

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7edfe0773bc45fa97ad00cde2b6e48d~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

如图，把这个模型放到二维坐标系中

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c70c1c1bb0d4487e8ae9c3ebebd81fa4~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

那么，构建出来的三角形，三条边的边长如下：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86beeb643fc549c9a3b24bf822cb0de6~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

把 a、b、c 边长带入余弦定理公式，计算过程如下：

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d695e328a5b49848c3cc3e8df66ae5b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

这是在二维坐标中，进行推导的，如果过程扩展到 n 位坐标系中，这个公式就是上面说通俗版公式

### 举个栗子

A 用户对 a、b、d 物品有兴趣，B 用户对 a、c 物品有兴趣，C 用户对 b、e 物品有兴趣，D 用户对 c、d、e 物品有兴趣，把这个转化成向量图，带入公式计算得出相似度，计算过程如图所示

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d07249b0985d4a8888507a84636f65a3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

> 余弦相似度就为大家分享到这里，欢迎大家来交流，指出文中一些说错的地方，让我加深认识，愿大家没有 bug，谢谢！