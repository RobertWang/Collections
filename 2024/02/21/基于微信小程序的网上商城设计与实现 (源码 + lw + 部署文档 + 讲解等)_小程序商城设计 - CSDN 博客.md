> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [blog.csdn.net](https://blog.csdn.net/qq_45714272/article/details/133125795)

å‰è¨€
--

> ğŸ’—**åšä¸»ä»‹ç»**ï¼šâœŒå…¨ç½‘ç²‰ä¸ 10W+,CSDN ç‰¹é‚€ä½œè€…ã€åšå®¢ä¸“å®¶ã€CSDN [æ–°æ˜Ÿè®¡åˆ’](https://so.csdn.net/so/search?q=%E6%96%B0%E6%98%9F%E8%AE%A1%E5%88%92&spm=1001.2101.3001.7020)å¯¼å¸ˆã€å…¨æ ˆé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ï¼Œåšå®¢ä¹‹æ˜Ÿã€æ˜é‡‘ / åä¸ºäº‘ / é˜¿é‡Œäº‘ / InfoQ ç­‰å¹³å°ä¼˜è´¨ä½œè€…ã€ä¸“æ³¨äº Javaã€å°ç¨‹åºæŠ€æœ¯é¢†åŸŸå’Œæ¯•ä¸šé¡¹ç›®å®æˆ˜âœŒğŸ’—  
> ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ  æ¨èè®¢é˜…ğŸ‘‡ğŸ»  
> [2023-2024 å¹´æœ€å€¼å¾—é€‰çš„å¾®ä¿¡å°ç¨‹åºæ¯•ä¸šè®¾è®¡é€‰é¢˜å¤§å…¨ï¼š100 ä¸ªçƒ­é—¨é€‰é¢˜æ¨èâœ…](https://blog.csdn.net/qq_45714272/article/details/132814943?spm=1001.2014.3001.5502)
> 
> [2023-2024 å¹´æœ€å€¼å¾—é€‰çš„ Java æ¯•ä¸šè®¾è®¡é€‰é¢˜å¤§å…¨ï¼š500 ä¸ªçƒ­é—¨é€‰é¢˜æ¨èâœ…](https://blog.csdn.net/qq_45714272/article/details/132814943?spm=1001.2014.3001.5502)
> 
> [Java ç²¾å“å®æˆ˜æ¡ˆä¾‹ã€Š500 å¥—ã€‹](https://blog.csdn.net/qq_45714272/category_12425219.html?spm=1001.2014.3001.5482)
> 
> [å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ç²¾å“æ¡ˆä¾‹ã€Š500 å¥—ã€‹](https://blog.csdn.net/qq_45714272/category_12425220.html?spm=1001.2014.3001.5482)
> 
> ğŸŒŸæ–‡æœ«è·å–æºç  + æ•°æ®åº“ğŸŒŸ  
> æ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—èµ·æ¥ï¼Œè¿˜æœ‰å¤§å®¶åœ¨æ¯•è®¾é€‰é¢˜ï¼Œé¡¹ç›®ä»¥åŠè®ºæ–‡ç¼–å†™ç­‰ç›¸å…³é—®é¢˜éƒ½å¯ä»¥ç»™æˆ‘ç•™è¨€å’¨è¯¢ï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šçš„äºº

ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾
-------

![](https://img-blog.csdnimg.cn/59d07a58204d41fab26049e6c268657c.png)

å…·ä½“å®ç°
----

### 5.1 ç®¡ç†å‘˜æœåŠ¡ç«¯åŠŸèƒ½ç•Œé¢

ç®¡ç†å‘˜é€šè¿‡å¡«å†™è´¦å·ã€å¯†ç ã€è§’è‰²è¿›è¡Œç™»å½•å¦‚å›¾ 5-7 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/37445dc8f0958f362c0f9883533612eb.jpeg)

å›¾ 5.1 ç®¡ç†å‘˜ç™»å½•ç•Œé¢å›¾

ç®¡ç†å‘˜è¿›å…¥åˆ°é¦–é¡µç•Œé¢ï¼Œé€šè¿‡ç•Œé¢çš„ä»»åŠ¡å¤§å…ï¼Œè¿›å…¥åˆ°ç³»ç»Ÿå¯ä»¥è¿›è¡ŒæŸ¥çœ‹ä¸ªäººä¸­å¿ƒã€ç”¨æˆ·ç®¡ç†ã€å•†å“ä¿¡æ¯ç®¡ç†ã€å•†å“ç±»å‹ç®¡ç†ã€æ´»åŠ¨ä¸“åŒºç®¡ç†ã€æ–°å“ä¸“åŒºç®¡ç†ã€æ–°å“ä¸Šæ¶ç®¡ç†ã€ç”¨æˆ·è¯„è®ºç®¡ç†ã€ç³»ç»Ÿç®¡ç†ã€è®¢å•ç®¡ç†ç­‰åŠŸèƒ½æ¨¡å—ï¼Œè¿›è¡Œç›¸å¯¹åº”æ“ä½œã€‚

ç”¨æˆ·ç®¡ç†ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è·å–å‘˜è´¦å·ã€å§“åã€æ€§åˆ«ã€æ‰‹æœºã€é‚®ç®±ã€ç…§ç‰‡ã€åœ°å€ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥çœ‹è¯¦æƒ…æˆ–åˆ é™¤æ“ä½œï¼Œå¹¶é€šè¿‡è¾“å…¥è´¦å·ã€å§“åè¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¦‚å›¾ 5-2 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/f206b96e2056562002c0b23dc6abd721.jpeg)

å›¾ 5.2 ç”¨æˆ·ç®¡ç†ç•Œé¢å›¾

å•†å“ç®¡ç†ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è·å–å•†å“åç§°ã€å•†å“ç±»å‹ã€è§„æ ¼ã€å›¾ç‰‡ã€ä»·æ ¼ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥çœ‹è¯¦æƒ…ã€ä¿®æ”¹æˆ–åˆ é™¤æ“ä½œï¼Œæˆ–åœ¨çº¿æŸ¥çœ‹è¯„è®ºæ“ä½œï¼Œå¦‚å›¾ 5-3 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/1fa21455f85208a1ec57576a8c09c4a6.jpeg)

å›¾ 5.3 å•†å“ä¿¡æ¯ç•Œé¢å›¾

æ´»åŠ¨ä¸“åŒºç®¡ç†ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è·å–å•†å“åç§°ã€å•†å“ç±»å‹ã€è§„æ ¼ã€å›¾ç‰‡ã€ä»·æ ¼ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥çœ‹è¯¦æƒ…æˆ–ä¿®æ”¹ä¿¡æ¯æˆ–æŸ¥çœ‹è¯„è®ºã€æ–°å¢æ´»åŠ¨ä¿¡æ¯æˆ–åˆ é™¤æ“ä½œï¼Œå¦‚å›¾ 5-4 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/fc5e54900e9e046e2d356ed46604f05b.jpeg)

å›¾ 5-4 æ´»åŠ¨ä¸“åŒºç®¡ç†ç•Œé¢å›¾

æ–°å“ä¸Šæ¶ç®¡ç†ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è·å–å•†å“åç§°ã€å•†å“ç±»å‹ã€è§„æ ¼ã€å›¾ç‰‡ã€ä»·æ ¼ç­‰ä¿¡æ¯ï¼Œè¿›è¡Œè¯¦æƒ…ã€ä¿®æ”¹ã€æŸ¥çœ‹è¯„è®ºã€åˆ é™¤æ“ä½œï¼Œå¹¶é€šè¿‡æ–°å¢è¿›è¡Œæ·»åŠ ä¿¡æ¯ï¼Œå¦‚å›¾ 5-5 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/afd9c3e9b356174038f8701dccb7010d.jpeg)

å›¾ 5-5 æ–°å“ä¸Šæ¶ç®¡ç†ç•Œé¢å›¾

ç”¨æˆ·è¯„ä»·ç®¡ç†ï¼Œç®¡ç†å‘˜é€šè¿‡åˆ—è¡¨å¯ä»¥è·å–ç¼–å·ã€å•†å“åç§°ã€æ”¶è´§æ—¶é—´ã€å•†å“è¯„ä»·ã€ç»¼åˆè¯„åˆ†ã€è¯„è¯­ã€è´¦å·ã€å§“åã€åœ°å€ã€å›¾ç‰‡ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥çœ‹è¯¦æƒ…ã€æˆ–åˆ é™¤æ“ä½œï¼Œå¦‚å›¾ 5-6 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/df9e369b00b105fe3cc896ff6cf2571f.jpeg)

å›¾ 5-6 ç”¨æˆ·è¯„ä»·ç®¡ç†ç•Œé¢å›¾

è®¢å•ç®¡ç†ï¼Œç®¡ç†å‘˜å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œç³»ç»Ÿæ‰€æœ‰çš„è®¢å•ä¿¡æ¯è¿›è¡Œåœ¨çº¿æŸ¥çœ‹ï¼Œç®¡ç†å‘˜å¯ä»¥æ ¹æ®æ¡ä»¶è¿›è¡Œé€‰æ‹©æœªä»˜æ¬¾è®¢å•ã€å·²ä»˜æ¬¾è®¢å•ã€æœªæ”¶è´§è®¢å•ã€å·²å®Œæˆè®¢å•ç­‰è¿›è¡Œæ¡ä»¶æŸ¥çœ‹ç›¸åº”çš„è®¢å•æ•°æ®å¹¶è¿›è¡Œè®¢å•å¤„ç†ï¼Œé€šè¿‡è®¢å•åˆ—è¡¨è¿›è¡ŒæŸ¥çœ‹ç³»ç»Ÿå·²æœ‰çš„è®¢å•ä¿¡æ¯ã€é‡‘é¢ã€è®¢å•ç”¨æˆ·ã€æ”¶è´§åœ°å€ã€è®¢å•çŠ¶æ€ç­‰ä¿¡æ¯ï¼Œå¹¶ä¸”æ ¹æ®è®¢å•çŠ¶æ€è¿›è¡Œè®¢å•å¤„ç†æ“ä½œï¼Œå¯¹äºè®¢å•çš„çŠ¶æ€ï¼Œå¯ä»¥åœ¨çº¿å¯¹è®¢å•ä¿¡æ¯è¿›è¡Œé€‰æ‹©å‘è´§ç­‰æ“ä½œï¼Œå¦‚å›¾ 5-7 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/f34a9ff7eafd4f5ccf80fd871247d8d7.jpeg)

å›¾ 5-7 è®¢å•ç®¡ç†ç•Œé¢å›¾

### 5.2 ç”¨æˆ·å¾®ä¿¡ç«¯åŠŸèƒ½æ¨¡å—

ç”¨æˆ·æ³¨å†Œï¼Œåœ¨ç”¨æˆ·æ³¨å†Œé¡µé¢å¯ä»¥å¡«å†™ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€è”ç³»ç”µè¯ç­‰ä¿¡æ¯ï¼Œè¿›è¡Œæ³¨å†Œå¦‚å›¾ 5-8 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/537badc8c671edccf1740b6899ab03b5.jpeg)

å›¾ 5-8 ç”¨æˆ·æ³¨å†Œç•Œé¢å›¾

ç”¨æˆ·ç™»å½•ï¼Œåœ¨ç”¨æˆ·ç™»å½•é¡µé¢å¡«å†™è´¦å·ã€å¯†ç è¿›è¡Œç™»å½•ï¼Œå¦‚å›¾ 5-9 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/7827444ccdefea3ee041d96f5242a8f9.jpeg)

å›¾ 5-10 ç”¨æˆ·ç™»å½•ç•Œé¢å›¾

é¦–é¡µã€ç”¨æˆ·ç™»å½•åˆ°ç½‘ä¸Šå•†åŸå®¢å¯ä»¥æŸ¥çœ‹é¦–é¡µã€å•†å“ä¿¡æ¯ã€æ´»åŠ¨ä¸“åŒºã€æ–°å“ä¸Šæ¶ã€æˆ‘çš„ç­‰åŠŸèƒ½æ¨¡å—ï¼Œè¿›è¡Œç›¸å¯¹åº”æ“ä½œï¼Œå¦‚å›¾ 5-11 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/f62e3e7caeac109b807a0108b1825dec.jpeg)

å›¾ 5-11 ç”¨æˆ·é¦–é¡µåŠŸèƒ½ç•Œé¢å›¾

å•†å“ä¿¡æ¯è¯¦æƒ…é¡µé¢ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è·å–å•†å“åç§°ã€å›¾ç‰‡ã€å•†å“ç±»å‹ã€è§„æ ¼ã€å•†å“ä»‹ç»ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥çœ‹ä¿¡æ¯è¯¦æƒ…æˆ–åŠ å…¥è´­ç‰©è½¦ã€ç«‹å³è®¢è´­æ“ä½œï¼Œå¹¶é€šè¿‡è¾“å…¥æ·»åŠ è¯„è®ºè¿›è¡Œè¯„è®ºæ“ä½œï¼Œå¦‚å›¾ 5-12 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/bbdb8f8d3a24a6d1084556f2690155e4.jpeg)

å›¾ 5-12 äº§å“è¯¦æƒ…ç•Œé¢å›¾

æˆ‘çš„ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è·å–ç”¨æˆ·è¯„ä»·ã€æˆ‘çš„æ”¶è—ç®¡ç†ã€ç”¨æˆ·å……å€¼ã€æ„è§åé¦ˆã€è´­ç‰©è½¦ã€æˆ‘çš„è®¢å•ç­‰åŠŸèƒ½æ¨¡å—ï¼Œè¿›è¡ŒæŸ¥çœ‹æ“ä½œï¼Œå¦‚å›¾ 5-13 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/a9c73b2d3687590a946e9a72a8e9b7c0.jpeg)

å›¾ 5-13 æˆ‘çš„ç•Œé¢å›¾

ç”¨æˆ·å……å€¼ï¼šé€šè¿‡é¡µé¢å¯ä»¥è¿›è¡Œè¾“å…¥è¦å……å€¼çš„é‡‘é¢ï¼Œè¿›è¡Œæäº¤å……å€¼æ“ä½œã€‚å¦‚å›¾ 5-14 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/e651d040314476a081ad10a79329eda7.jpeg)

å›¾ 5-14 ç”¨æˆ·å……å€¼ä¿¡æ¯ç•Œé¢å›¾

æ–°å¢æ”¶è´§åœ°å€: é€šè¿‡é¡µé¢å¯ä»¥è¿›è¡Œè¾“å…¥è”ç³»äººã€æ‰‹æœºå·ã€åœ°å€ã€è¿›è¡Œè®¾ä¸ºé»˜è®¤è¿›è¡Œæäº¤æ“ä½œã€‚å¦‚å›¾ 5-15 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/d27962223d87bc815d0ffe14c01505c4.jpeg)

å›¾ 5-15 æ–°å¢æ”¶è´§åœ°å€é¢å›¾

è´­ç‰©è½¦ï¼šé€šè¿‡é¡µé¢å¯ä»¥è·å–å•†å“åç§°ã€ä»·æ ¼ã€å›¾ç‰‡ã€æ•°é‡è¿›è¡ŒæŸ¥çœ‹æ€»é‡‘é¢è¿›è¡ŒæŸ¥çœ‹æˆ–ç«‹å³ä¸‹å•æ“ä½œã€‚å¦‚å›¾ 5-16 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/a1570bbd1a9f125ab354107b9a13a733.jpeg)

å›¾ 5-16 è´­ç‰©è½¦é¢å›¾

æˆ‘çš„è®¢å•ï¼šé€šè¿‡é¡µé¢å¯ä»¥è·å–å·²æ”¯ä»˜ã€å·²å‘è´§ã€å·²å®Œæˆã€å·²å–æ¶ˆç­‰è®¢å•ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥çœ‹æˆ–å–æ¶ˆè®¢å•æ“ä½œã€‚å¦‚å›¾ 5-17 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/68f972f1458bada5579bc2391926cbd5.jpeg)

å›¾ 5-17 æˆ‘çš„è®¢å•é¢å›¾

æˆ‘çš„è¯„ä»·ï¼šé€šè¿‡åˆ—è¡¨å¯ä»¥è¿›è¡Œè¾“å…¥ç¼–å·ã€å•†å“åç§°ã€æ”¶è´§æ—¶é—´ã€å•†å“è¯„ä»·ã€ç»¼åˆè¯„åˆ†ã€å§“åã€å¸å·ã€åœ°å€ã€å›¾ç‰‡ã€è¯„è¯­ç­‰ä¿¡æ¯ï¼Œè¿›è¡Œåœ¨çº¿æäº¤è¯„ä»·æ“ä½œã€‚å¦‚å›¾ 5-18 æ‰€ç¤ºã€‚

![](https://img-blog.csdnimg.cn/img_convert/ed60c6678e7de10d4ffe0d6ff04d0acc.jpeg)

å›¾ 5-18 æˆ‘çš„è¯„ä»·é¢å›¾

### 5.2 å°ç¨‹åºåŠŸèƒ½è§†é¢‘æ¼”ç¤º

è¯·è”ç³»æˆ‘è·å–æ¼”ç¤ºè§†é¢‘

ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘
------

### è‡ªå·±çš„ç½‘ç«™

![](https://img-blog.csdnimg.cn/img_convert/a49f6e9915b73a40ad0bbae2cce78311.png)

ç½‘ç«™ä¸Šä¼ çš„é¡¹ç›®å‡ä¸ºåšä¸»è‡ªå·±æ”¶é›†å’Œå¼€å‘çš„ï¼Œè´¨é‡éƒ½å¯ä»¥å¾—åˆ°ä¿éšœï¼Œé€‚åˆè‡ªå·±æ‡‚ä¸€ç‚¹ç¨‹åºå¼€å‘çš„åŒå­¦ä½¿ç”¨ï¼

### è‡ªå·±çš„å°ç¨‹åºï¼ˆå°è”¡ codingï¼‰

![](https://img-blog.csdnimg.cn/img_convert/23f6b3b860a5c73ad6e707031281ff6a.png)

ä¸ºäº†æ–¹ä¾¿åŒå­¦ä»¬ä½¿ç”¨ï¼Œæˆ‘å¼€å‘äº†å°ç¨‹åºç‰ˆçš„ï¼Œåå­—å«å°è”¡ codingã€‚åŒå­¦ä»¬å¯ä»¥é€šè¿‡å°ç¨‹åºå¿«é€Ÿæœç´¢å’Œå®šä½åˆ°è‡ªå·±æƒ³è¦çš„ç¨‹åº

### æœ‰ä¿éšœçš„å”®å

![](https://img-blog.csdnimg.cn/img_convert/55f7ccd6f9c550a024f421f0a2291fea.jpeg)

### ç¦åˆ©

æ¯æ¨èä¸€ä½åŒå­¦ï¼Œæ¨èè´¹ä¸€ä½ 100ï¼  
![](https://img-blog.csdnimg.cn/img_convert/5b51d24960a4533a68f4ed38059b1ca1.png)

ä»£ç å‚è€ƒ
----

```
@IgnoreAuth
@PostMapping(value = "/login")
public R login(String username, String password, String captcha, HttpServletRequest request) {
   UsersEntity user = userService.selectOne(new EntityWrapper<UsersEntity>().eq("username", username));
   if(user==null || !user.getPassword().equals(password)) {
      return R.error("è´¦å·æˆ–å¯†ç ä¸æ­£ç¡®");
   }
   String token = tokenService.generateToken(user.getId(),username, "users", user.getRole());
   return R.ok().put("token", token);
}

	@Override
	public String generateToken(Long userid,String username, String tableName, String role) {
		TokenEntity tokenEntity = this.selectOne(new EntityWrapper<TokenEntity>().eq("userid", userid).eq("role", role));
		String token = CommonUtil.getRandomString(32);
		Calendar cal = Calendar.getInstance();   
    	cal.setTime(new Date());   
    	cal.add(Calendar.HOUR_OF_DAY, 1);
		if(tokenEntity!=null) {
			tokenEntity.setToken(token);
			tokenEntity.setExpiratedtime(cal.getTime());
			this.updateById(tokenEntity);
		} else {
			this.insert(new TokenEntity(userid,username, tableName, role, token, cal.getTime()));
		}
		return token;
	}



/**
 * æƒé™(Token)éªŒè¯
 */
@Component
public class AuthorizationInterceptor implements HandlerInterceptor {

    public static final String LOGIN_TOKEN_KEY = "Token";

    @Autowired
    private TokenService tokenService;
    
	@Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {

		//æ”¯æŒè·¨åŸŸè¯·æ±‚
        response.setHeader("Access-Control-Allow-Methods", "POST, GET, OPTIONS, DELETE");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Credentials", "true");
        response.setHeader("Access-Control-Allow-Headers", "x-requested-with,request-source,Token, Origin,imgType, Content-Type, cache-control,postman-token,Cookie, Accept,authorization");
        response.setHeader("Access-Control-Allow-Origin", request.getHeader("Origin"));
	// è·¨åŸŸæ—¶ä¼šé¦–å…ˆå‘é€ä¸€ä¸ªOPTIONSè¯·æ±‚ï¼Œè¿™é‡Œæˆ‘ä»¬ç»™OPTIONSè¯·æ±‚ç›´æ¥è¿”å›æ­£å¸¸çŠ¶æ€
	if (request.getMethod().equals(RequestMethod.OPTIONS.name())) {
        	response.setStatus(HttpStatus.OK.value());
            return false;
        }
        
        IgnoreAuth annotation;
        if (handler instanceof HandlerMethod) {
            annotation = ((HandlerMethod) handler).getMethodAnnotation(IgnoreAuth.class);
        } else {
            return true;
        }

        //ä»headerä¸­è·å–token
        String token = request.getHeader(LOGIN_TOKEN_KEY);
        
        /**
         * ä¸éœ€è¦éªŒè¯æƒé™çš„æ–¹æ³•ç›´æ¥æ”¾è¿‡
         */
        if(annotation!=null) {
        	return true;
        }
        
        TokenEntity tokenEntity = null;
        if(StringUtils.isNotBlank(token)) {
        	tokenEntity = tokenService.getTokenEntity(token);
        }
        
        if(tokenEntity != null) {
        	request.getSession().setAttribute("userId", tokenEntity.getUserid());
        	request.getSession().setAttribute("role", tokenEntity.getRole());
        	request.getSession().setAttribute("tableName", tokenEntity.getTablename());
        	request.getSession().setAttribute("username", tokenEntity.getUsername());
        	return true;
        }
        
		PrintWriter writer = null;
		response.setCharacterEncoding("UTF-8");
		response.setContentType("application/json; charset=utf-8");
		try {
		    writer = response.getWriter();
		    writer.print(JSONObject.toJSONString(R.error(401, "è¯·å…ˆç™»å½•")));
		} finally {
		    if(writer != null){
		        writer.close();
		    }
		}
//				throw new EIException("è¯·å…ˆç™»å½•", 401);
		return false;
    }
}


```

è®ºæ–‡å‚è€ƒ
----

![](https://img-blog.csdnimg.cn/e669796cc82e47aa8cd0b080fcfc5062.png)

æºç è·å–
----

æ–‡ç« ä¸‹æ–¹åç‰‡è”ç³»æˆ‘å³å¯~  
å¤§å®¶ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€è¯„è®ºå•¦ ã€æŸ¥çœ‹ğŸ‘‡ğŸ»è·å–è”ç³»æ–¹å¼ğŸ‘‡ğŸ»  
ç²¾å½©ä¸“æ æ¨èè®¢é˜…ï¼šåœ¨ä¸‹æ–¹ä¸“æ ğŸ‘‡ğŸ»  
[Java ç²¾å“å®æˆ˜æ¡ˆä¾‹ã€Š500 å¥—ã€‹](https://blog.csdn.net/qq_45714272/category_12425219.html?spm=1001.2014.3001.5482)  
[å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ç²¾å“æ¡ˆä¾‹ã€Š500 å¥—ã€‹](https://blog.csdn.net/qq_45714272/category_12425220.html?spm=1001.2014.3001.5482)