> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s?__biz=MzI5OTk5OTM2Mw==&mid=2247535894&idx=2&sn=1b87acce5aa8a6007491d7e3331f75e6&chksm=ec8c04fadbfb8dec666e11954e8f8b6ef02258907e7078f79bfe9cb8a46390d5a151045b9f8a&mpshare=1&scene=1&srcid=08163BTMMOLcMoTzsmOEetSu&sharer_sharetime=1629125168329&sharer_shareid=7fece245937ac96f04f0fb8e1311fff1#rd)

  

**导读：**都是基础，入门必看。

作者：小枣君

来源：鲜枣课堂（ID：xzclasscom）

说到 “存储”，大家会想到什么？

是这个？

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1ia9pF2GaydDykCDE100JkKTlBhKhpUcqewX5nCA3JQJBAPZhhzxCO3rQ/640?wx_fmt=jpeg)

还是这个？

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaIGhX4awSEFaib56g9ZWtKg3GLay62R5knEJibcGLMrntyafj2UqU7icZQ/640?wx_fmt=png)

又或者是这个？

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaYy2Dyc58nCvCkeU9rHzkD2AUY8FbBHVicxxx83NCfKiaN1JPfRFnpeAg/640?wx_fmt=png)

哈哈，没错，我们现在处于信息时代，每天都在和电脑、手机打交道。我们的工作和生活，已经完全离不开视频、音乐、图片、文本、表格这样的数据文件。

而所有这些数据文件，都需要通过电子设备进行保存，这就是数据存储，简称存储。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaia06Ucf5CsbeEufCicU1Cj0AaRBwdFxM9qtJIIkicBWnG4j2YVPy2GGFg/640?wx_fmt=png)  

**01 存储的基本载体——硬盘**

对于普通用户来说，最常见的存储设备，就是硬盘。  
  
我们知道，**计算机的三大核心硬件**，分别是 **CPU**（中央处理器）、**内存**（Memory）和**硬盘**（Hard Disk）。CPU 负责运算，硬盘负责存储。而内存，是 CPU 和硬盘之间的桥梁。用于暂时存放 CPU 中的运算数据。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaLsp5ouzQDOHMZPNbSaibCITiaNQX3LvFwBCflQjYeuQNSlJWhicOqCBaw/640?wx_fmt=png)

▲CPU、内存、硬盘

绝大部分的台式机、服务器、手机，都是**内置存储系统**。也就是说，它们的硬盘安装在设备内部。

以普通台式机为例，硬盘通过专用接口和数据线，连接在主板上，实现和 CPU、内存的数据连接。  
  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1ia4xAHqduibxsPnmy3V251MGwia8ibOSIz9Na0JcWdic8x4SicFzsOwyMCt0g/640?wx_fmt=png)

▲台式机上安装好的硬盘

常用的硬盘专用接口如下：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1ia8NRIqVaXC1EcwKj3PmCic0vrQGeUQ92PRCibKTTWAk9ofxmErYYJGtDA/640?wx_fmt=png)  

手机等数码设备的 “硬盘”，则是做成了很小的存储芯片，直接焊在主板上。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1ia6r5RIyB52q923eqfWVoC6CuTSOlytayWFt0DC7FJmLgQxzwgaZ2Zmw/640?wx_fmt=png)

▲常见的手机存储芯片：eMMC、UFS（更快）

我们再来简单看看**硬盘的内部结构**。

目前主流的硬盘类型有两种，分别是传统机械硬盘和 SSD 固态硬盘。小枣君以大家比较熟悉的机械硬盘为例进行介绍。  
  

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaw6KDIRz2wMon6Va1mjebIeXVr5fzN6dP3h6jzbUic3gBNgxJ3AQAMdg/640?wx_fmt=jpeg)

▲左边是机械硬盘，右边是 SSD 固态硬盘

硬盘之所以叫硬盘，是因为它的核心部分是一块或多块由坚硬金属材料制成的**盘片**。盘片上面涂抹了磁性介质，两面都可以记录信息。在盘面上读 / 写数据的，是**磁头**。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaIAA2NpB3vsyJabgXL7IUlSQ6TNIKFzmibQqRzJkpZkuhAWCGKicMfA9A/640?wx_fmt=jpeg)

▲硬盘，也叫磁盘（有点像唱片机）

下图显示的是一个盘面：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iawltr4icR4Lz1SoBDLtBVXJiaalfK2LEictdPVpVVSTyOial2Ta0YKmY2mw/640?wx_fmt=png)

盘面中一圈圈灰色同心圆为一条条**磁道**。从圆心向外画直线，可以将磁道划分为若干个弧段，每个弧段被称之为一个**扇区**（Sector，图中绿色部分）。

扇区是磁盘的最小组成单元。大家应该看出来了，越靠圆心，扇区越短。那么，是不是越往外，扇区越长，存储的数据越多呢？

不一定。

老式的硬盘，不管靠内还是靠外，每个扇区的大小是一样的，都是 512 字节。这种硬盘用柱面 - 磁头 - 扇区号（CHS，Cylinder-Head-Sector）组成的编号进行寻址。

而现在主流的硬盘，扇区密度是一致的，也就是说，越靠外侧，扇区数越多。每个扇区的大小是 4K 字节，用一个逻辑块编号寻址（LBA，Logical Block Addressing）。

以扇区为基础，一个或多个连续的扇区组成一个块，叫做**物理块**。所以，硬盘往往又叫**块设备**（Block Device）。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaDSgmqGaOMnuictBNibs6j8px2A2Zc3PrPXE5s10kgtlc3FAtmQSBUgiaQ/640?wx_fmt=png)  

**02 什么是逻辑卷？什么是文件系统？**

为了方便管理，我们可以将硬盘这样的物理块设备，分割成多个逻辑块设备。或者，我们也可以将多个物理块设备，组合成一个容量更大的逻辑块设备。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaicxhaaGGZXhp1IVbm5NLM6HS9dJTibK895vOGVhDia8OOmUoRVFib5YKaA/640?wx_fmt=jpeg)

底层的相关技术和工具，包括 RAID（大家可能比较熟悉）、JBOD、卷管理系统（Volume Manager）。

Windows 的卷管理系统，就是它自带的磁盘管理工具。而 Linux 的，是大名鼎鼎的 LVM（Logical Volume Manager，逻辑卷管理）。

我们先说说 Windows 的。  

在 Windows 中，磁盘分为基本磁盘和动态磁盘。默认情况下，用户用的都是基本磁盘。

一个基本磁盘可以划分为多个分区，分区类别包括主分区、扩展分区和逻辑分区。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iajAM1gFtW2ibvwEPFXxzmkNsEC459ewDPTJwGFliaZGMMHus5TLar7Tmg/640?wx_fmt=jpeg)

▲硬盘分区

主分区是硬盘的启动分区，我们常说的 “C 盘” 就是硬盘上的主分区。MBR 分区表可以划分出 4 个主分区。如果使用 GPT 分区，可以管理 128 个主分区。

除去主分区以外，硬盘剩下的容量就被认定为扩展分区。扩展分区不能直接使用。扩展分区可以分成一个或若干个逻辑分区，也就是我们的 “D 盘”、“E 盘” 等。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaarABfgH9omib0d6q195q7TapZibeogOj7icLuo9wpa23kS5fd1ciaHGiaCg/640?wx_fmt=jpeg)

动态磁盘是基本磁盘的升级模式。在动态磁盘中，分区叫做**卷**。卷的出现，就是为了便于对多硬盘进行管理。

简单来说，动态磁盘可以将不同硬盘分到一个卷。假如你手中有 160G 和 250G 硬盘各一块，如果想划分 90G 和 320G 的分区，就可以借助动态磁盘来完成。

动态磁盘里面的卷，又分为简单卷、跨区卷、带区卷、镜像卷、RAID-5 卷。限于篇幅，就不做具体介绍了。基本磁盘里的分区，现在也被微软改叫为卷。

再来看看 Linux 的 LVM 工具。

其实 LVM 和动态磁盘的思路差不多的，也是把物理空间变成逻辑空间。

首先，物理存储介质进行初始化，变成**物理卷（PV，physical volume）**。

然后，一个或多个物理卷组成一个**卷组（VG，Volume Group）**。

创建卷组之后，再创建**逻辑卷（LV，logical volume）**。

整个过程，如下图所示：  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iapBWFnX0fAJzKU7KqCjgR5YI4rrL6jXqibWvehrYibpBiash5cpQdc6NwA/640?wx_fmt=png)

▲LVM 主要元素的构成

好了，不管是 Windows 还是 Linux，逻辑卷都有了，是不是可以直接使用它们啦？

不行，还差一步。那就是**文件系统（File System）**。  
  
文件系统就像仓库管理员。作为用户，你不需要知道仓库里面到底是什么样子，只需要把货物交给他，他会以一个树形结构目录，登记这些货物。你来取的时候，只需要告诉他路径，他就会把货物交给你。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaJCe01FiaS4ia0IX5rfmxnnjV9mbXtCo867MicQCr3S68Kaia1WWW1cTE3Q/640?wx_fmt=png)

▲文件夹结构

文件系统有很多种类型，常见的有 Windows 的 FAT/FAT32/NTFS（大家应该很熟悉），还有就是 Linux 的 EXT2/EXT3/EXT4/XFS/BtrFS 等。

Windows 系统下，通过对分区（卷）进行文件系统格式化，再分配一个盘符，我们就可以在 “我的电脑” 里看到可用的磁盘。Linux 系统下，我们需要对逻辑卷进行文件系统格式化，然后执行挂载操作，也就能对存储空间进行使用了。

**03 什么是 DAS/NAS/SAN**  
  
除了内置存储之外，随着存储容量需求的不断增加，加上维护便利性的需要，计算机系统开始引入了**外挂存储**。也就是说，硬盘从计算机的内部，跑到了计算机的外部。  
  
外挂存储分为两种，一种是**直连式存储（DAS，Direct Attached Storage）**，还有一种是**网络存储（FAS，Fabric Attached Storage）**。  
  
DAS 直连式存储，一般是使用专用线缆（例如 SCSI），与存储设备（例如磁盘阵列）进行直连。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iadWug8X5Ty9snGTAkvdMB5mcOPpZtM19r8clFrGxuImt5UZ6UTmOVCg/640?wx_fmt=png)

虽然数据存储设备看似在外部，但直接挂接在服务器内部总线上，是整个服务器结构的一部分。

DAS 的缺点是存储设备只能连接到一台主机使用，无法共享，成本较高，且安全性可靠性较低。

FAS 网络存储，是一种多点连接式的存储。它又分为 **NAS（Network-attached Storage，网络接入存储）**和 **SAN（Storage Area Network，存储区域网络）**。  
  
这些概念的名字非常像，大家千万别晕。画个图看得明白一些：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1ia0XamM5DiaoDC0sS7blb8lGMYMXtlWIEfOZV1DcGgSExKG87B9f8O4fQ/640?wx_fmt=png)  

NAS 与 DAS 相比，最大的特点是非直连。它可以通过 IP 网络，实现多台主机与存储设备之间的连接。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1ia7cSmT78Ah5Lh0SRoU8icaGICVAoJTOO4csxlxsfbRy8ykS6bYGibojwg/640?wx_fmt=png)  

NAS 大大提高了存储的安全性、共享性和成本。但是 I/O（输入输出）渐渐成为性能瓶颈。随着应用服务器的不断增加，网络系统效率会急剧下降。为了解决这个问题，出现了 SAN 存储方案。

SAN 是在 NAS 基础上做的演进。它通过**专用光纤通道交换机**访问数据，采用 ISCSI、FC 协议。

SAN 和 NAS 的关键区别，就在于**文件系统的位置**。画个图就明白了：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaM3r4S3mmS8TfoZdYxhFGLpVBib1PY5bLBoWbkeueq7zswP3PPj4mZvg/640?wx_fmt=png)  

可以看出，**如果说 SAN 是一块网络硬盘的话，NAS 基本上已经像一台独立的服务器了。**NAS 拥有文件系统，用户可以通过 TCP/IP 协议直接访问上面的数据。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/pUm6Hxkd4372hbsBbHpoMiaJ6y6rm6o1iaz2TdSJclXAaMZD6G8svtrwIM90ia4bx0BofeKlzHURRaQUZcuJF2Cfg/640?wx_fmt=jpeg)

现在很多家庭都开始使用小型 NAS 设备，相当于一个小型服务器。

在 NAS 的模式下，不同的客户端可以使用**网络文件系统（Network File System）**访问 NAS 上的文件。常见的网络文件系统有 Windows 网络的 CIFS（也叫 SMB）、类 Unix 系统网络的 NFS 等。

FTP、HTTP 其实也算是文件存储的某种特殊实现，它们通过某个 URL 地址来访问一个文件。  
  
  

**04 未完待续……**

随着互联网的持续发展，网络上的数据量在不断激增，这给存储系统带来了巨大的压力和挑战。

云计算的兴起，会给我们全新的解决方案吗？我们以后再聊！