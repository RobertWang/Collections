> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [juejin.cn](https://juejin.cn/post/7016573757015719972) s2​, 他们的 Joro 距离定义为： ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a80d4ad2dc541fc88e95ce1dbc4998e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp) 其中： m 表示两个字符串中 **match** 的字符数 ∣si​∣表示文本串长度 t 表示换位 (transpositoins) 数目()

求 **match** 的字符数： 分别来自 s1​,s2​的字符，当他们相同或者距离小于 d=⌊2max(∣xi​∣,∣x2​∣)​⌋−1, 则被认为是 **match** 的。

比如：s1​=“DIXON”, s2​=“DICKSONX” ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10e3dba740c5415db1b9d6f6b9c77c4b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp) 距离 d 计算出来等于 3, 则每一次从 max(0,i-d) 到 min(i+d,xLen) 的空间内比较（如果从横轴 s1​进行比较，xLen 表示 s1​长度）。最终得到 **match** 数 m=4。

s1​中的每一个字符都会与 s2​中距离 d 内的字符进行比较。将所有 **match** 的字符串，需要替调换顺序才能匹配的总数除以二就是 transpositions 的大小 t。这里两个字符串中匹配的分别是："DION"，“DION", 所以 t=0。 另外 ∣s1​∣=4, ∣s2​∣=8, 则： dj​=31​(54​+84​+44−0​)

参考： [rosettacode.org/wiki/Jaro_d…](https://link.juejin.cn?target=https%3A%2F%2Frosettacode.org%2Fwiki%2FJaro_distance%23Java "https://rosettacode.org/wiki/Jaro_distance#Java")

2. PCA like SIF
---------------

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52c22f33b767495c9104eb041c4011be~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

1.  第一步，对句子中的每个词向量，乘以一个独特的权值。这个权值是一个常数α除以α与该词语频率的和，也就是说高频词的权值会相对下降。求和后得到暂时的句向量。
    
2.  然后计算语料库所有句向量构成的矩阵的第一个主成分 u，让每个句向量减去它在 u 上的投影（类似 PCA）。其中，一个向量 v 在另一个向量 u 上的投影定义如下： ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b131c498679140b3a70e8081682b77d9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)
    
3.  代码实现： ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f65b676fc26b41ecb08e0df9c8b32b04~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)