> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [juejin.cn](https://juejin.cn/post/6844903575752015879) def phash(img): img = img.resize((8, 8), Image.ANTIALIAS).convert('L') avg = reduce(lambda x, y: x + y, img.getdata()) / 64. return reduce( lambda x, (y, z): x | (z << y), enumerate(map(lambda i: 0 if i < avg else 1, img.getdata())), 0 ) 复制代码

计算汉明距离:

```
def hamming_distance(a, b):
    return bin(a^b).count('1')
复制代码

```

计算两个图片是否相似:

```
def is_imgs_similar(img1,img2):
	return True if hamming_distance(phash(img1),phash(img2)) <= 5 else False
复制代码

```

其中计算部分用到了 lambda 表达式和 reduce，可参考此文：[廖雪峰：map 和 reduce](https://link.juejin.cn?target=https%3A%2F%2Fwww.liaoxuefeng.com%2Fwiki%2F001374738125095c955c1e6d8bb493182103fac9270762a000%2F00141861202544241651579c69d4399a9aa135afef28c44000 "https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/00141861202544241651579c69d4399a9aa135afef28c44000")