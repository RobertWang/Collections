> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/6jgxpEUbL17xPBRoOOfMJg)

> 本文系统且通俗地讲解 Go 语言递归函数，提供步步深入的示例，只要 10 分钟就可以掌握递归函数的精髓！

**/** Go 语言递归函数 **/**

递归是一种很重要的编程技巧, 可以用简洁的代码解决许多问题。Go 语言同样支持递归函数。本文将通过示例讲解递归函数的用法。本文主要内容如下

> 1.  什么是递归函数
>     
> 2.  递归函数工作原理
>     
> 3.  递归函数结构解析
>     
> 4.  示例 1 - 阶乘计算
>     
> 5.  示例 2 - 斐波那契数列
>     
> 6.  递归函数与迭代函数
>     
> 7.  递归函数的优缺点
>     
> 8.  递归函数使用注意事项
>     
> 9.  递归函数应用场景
>     
> 10.  递归函数实现机制
>     

**一、什么是递归函数**

递归函数指的是在函数定义中调用自己的一种函数。

例如计算阶乘的递归函数:

```
func factorial(n uint) uint {
  if n == 0 { // 递归终止条件
    return 1
  }
  return n * factorial(n-1) // 调用自身
}

```

factorial 通过调用自身计算 n 的阶乘。

**二、递归函数工作原理**

递归函数的一般工作原理:

> 1.  检查递归终止条件
>     
> 2.  递归调用自身解决规模更小的子问题
>     
> 3.  合并子问题的解到原问题
>     

这与数学归纳法非常类似。

**三、递归函数结构解析**

一个递归函数需要同时具备:

> *   递归终止条件 (base case)
>     
> *   递归调用自身 (recursive call)
>     

如果缺少任一部分, 递归函数将无法正常工作。

**四、示例 1 - 阶乘计算**

计算 n 的阶乘:

```
func factorial(n uint) uint {
  if n == 0 { // 递归终止条件
    return 1 
  }
  return n * factorial(n-1) // 递归调用
}

```

测试:

```
fmt.Println(factorial(5)) // 输出120

```

factorial 通过调用自身计算较小的阶乘, 逐步推到 n=0 的终止条件, 非常简洁。

**五、示例 2 - 斐波那契数列**

使用递归求取斐波那契数列:

```
func fib(n int) int {
  if n == 0 { // 递归终止
    return 0
  }
  if n == 1 { 
    return 1
  }
  return fib(n-1) + fib(n-2) // 递归调用
}

```

测试:

```
fmt.Println(fib(5)) // 输出5

```

同样通过子问题求解整体问题, 推到已知的终止条件。

**六、递归函数与迭代函数**

递归函数和迭代函数可以相互转换:

阶乘递归函数:

```
func factorial(n uint) uint {
  // 递归求解  
}

```

等效迭代函数:

```
func factorial(n uint) uint {
  var res = 1
  for i := 1; i <= n; i++ {
    res *= i
  }
  return res 
}

```

两者本质上是解决同类型问题的不同方法。

**七、递归函数的优缺点**

递归函数的优缺点:

优点:

> *   简洁易读, 代码量少
>     
> *   数学归纳思维直观
>     
> *   可优雅解决分治法类问题
>     

缺点:

> *   性能和空间效率较差
>     
> *   调试和测试较困难
>     
> *   容易栈溢出
>     

**八、递归函数使用注意事项**

使用递归需要注意:

> *   正确设置递归终止条件, 避免无限递归
>     
> *   控制最大递归深度, 通常设置为 500 以内
>     
> *   合理使用缓存, 避免重复递归计算结果
>     

**_9_**

**九、递归函数应用场景**

递归函数在以下场景中非常实用:

> *   各类数学问题, 如阶乘、斐波那契数列、汉诺塔
>     
> *   图与树的遍历搜索算法
>     
> *   排序算法如快速排序、归并排序
>     
> *   分治法类的算法
>     
> *   回溯类问题, 如 N 皇后、解密
>     
> *   逆向推导某结果的过程
>     

等等。

**十、递归函数实现机制**

递归函数通过系统栈实现。每递归一次就将一个栈帧压入栈, 递归返回后弹出, 类似:

```
factorial(5)
  |
factorial(4)
  |
factorial(3) 
  |
...
  |  
factorial(1) // 终止条件

```

递归深度即是栈的深度。

**总结**

递归是一种常见和实用的编程技巧, Go 语言也对其进行了支持。

正确使用递归函数可以简化代码, 提高问题求解的效率。